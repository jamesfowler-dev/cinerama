{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="container py-4">
  <h2 class="mb-4 text-white">Manage Your Bookings</h2>

  {% if bookings %}
    <div class="list-group">
      {% for b in bookings %}
        <div class="list-group-item mb-3 bg-dark">
          <div class="d-flex justify-content-between align-items-start">
            <div>
              <h5 class="mb-1 text-white">{{ b.showtime.film.title }}</h5>
              <small class="text-muted">Booking ID: {{ b.booking_id }}</small>
              <p class="mb-1 text-white">{{ b.showtime.date|date:"D j M Y" }} at {{ b.showtime.time|time:"H:i" }} â€” {{ b.showtime.screen }}</p>
              <p class="mb-0 text-white">Seats: {{ b.seat_numbers }}</p>
            </div>
            <div class="text-end">
              <a href="{% url 'edit_booking' b.booking_id %}" class="btn btn-sm btn-outline-light mb-2">Edit</a>
              <form method="post" action="{% url 'delete_booking' b.booking_id %}" style="display:inline-block;" onsubmit="return confirm('Delete this booking?');">
                {% csrf_token %}
                <button type="submit" class="btn btn-sm btn-danger">Delete</button>
              </form>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-info">You have no bookings.</div>
  {% endif %}
</div>
{% endblock %}
